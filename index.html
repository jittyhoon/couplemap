<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <title>디지털 일기 지도</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        body {
            margin: 0;
        }

        #map {
            height: 100vh;
        }

        #title {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 24px;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            color: black;
            font-size: 18px;
            font-weight: bold;
            font-family: "Comic Sans MS", "Arial Rounded MT Bold", cursive;
            text-align: center;
            border-radius: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            letter-spacing: 2px;
            z-index: 2000;
            animation: heartbeat 1.5s infinite;
        }

        @keyframes heartbeat {
            0%, 100% {
                transform: translateX(-50%) scale(1);
            }

            50% {
                transform: translateX(-50%) scale(1.1);
            }
        }

        #introModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 3000;
            justify-content: center;
            align-items: center;
        }

        /* 모달 박스 */
        #introContent {
            background: black;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            width: 60%;
            max-width: 500px;
            animation: fadeIn 0.5s;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        /* 닫기 버튼 */
        #introClose {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        /* 텍스트 스타일 */
        #introContent h2 {
            color: #ff6699;
            margin-bottom: 15px;
        }

        #introContent p {
            font-size: 18px;
            color: #444;
            line-height: 1.6em;
        }

        /* 등장 애니메이션 */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        #controls {
            position: absolute;
            top: 20px;
            left: 40px;
            z-index: 1001;
            background: lightpink;
            padding: 8px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }

        button {
            margin: 4px;
            padding: 5px 10px;
            cursor: pointer;
            border: none;
            border-radius: 6px;
            background-color: cornflowerblue;
        }

            button.active {
                background-color: lawngreen;
                color: lightpink;
            }

        .preview-img {
            width: 100px;
            border-radius: 8px;
        }

        #detailModal {
            display: none;
            position: fixed;
            top: 20%;
            left: 30%;
            max-width: 600px;
            width: 40%;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 0 10px gray;
            z-index: 1000;
            background-color: #fff;
            transition: all 0.3s;
        }

            /* 여행 모달 */
            #detailModal.travel {
                background: linear-gradient(135deg, #f9f9f9, #e0f7fa);
                max-height: 80vh;
                padding: 20px;
            }

            /* 기념일 모달 */
            #detailModal.event {
                background: linear-gradient(135deg, #ffe6f0, #ffccd9);
                border: 2px solid #ff69b4;
                max-height: 80vh;
                padding: 20px;
            }

        #modalImage {
            width: 75%;
            max-height: 460px;
            border-radius: 6px;
            margin-bottom: 10px;
            object-fit: cover;
        }

        #modalDiary {
            white-space: pre-wrap; /* 줄바꿈과 공백 유지 */
            word-wrap: break-word; /* 너무 긴 단어도 자동 줄 바꿈 */
            overflow-wrap: break-word; /* 최신 브라우저 호환 */
        }

        @media screen and (max-width: 768px) {
            /* 모달 위치, 크기 조정 */
            #detailModal {
                top: 10%;
                left: 5%;
                width: 70%;
                max-width: none;
                padding: 15px;
            }

            /* 모달 이미지 확대 */
            #modalImage {
                width: 90%;
                max-height: 300px;
                margin-bottom: 15px;
            }

            /* 모달 글자 크기 조정 */
            #modalDiary {
                font-size: 14px;
                line-height: 1.5em;
            }

            /* 닫기 버튼 조금 더 크게 */
            #introClose {
                font-size: 32px;
                top: 15px;
                right: 15px;
            }

            /* 미리보기 이미지도 조금 키움 */
            .preview-img {
                width: 90px;
            }
        }
    </style>
</head>
<body>
    <div id="title">💖 전국구 커플지도 💖</div>
    <div id="map"></div>

    <div id="controls">
        <button id="allBtn" onclick="setFilter('all', this)">모두 보기</button>
        <button id="eventBtn" onclick="setFilter('기념일', this)">기념일만 보기</button>
    </div>

    <div id="detailModal">
        <h2 id="modalTitle"></h2>
        <img id="modalImage" />
        <p id="modalDiary"></p>
        <button onclick="closeModal()">닫기</button>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // 지도 초기화
        const map = L.map('map').setView([37.5665, 126.9780], 7);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);
        // 지역 데이터
        const places = [
            {
                name: "정원이와 생일썸이트",
                coords: [37.525923, 126.928485],
                img: "220906.jpg",
                diary: "[2022.09.06]정원이와 더현대에서 랍스타짬뽕과 한우짜장을 먹었다!사실 이날은 가짜생일이였지만ㅠㅠ 처음으로 생일데이트를 한날이라고 봐야겠지??",
                placeType: "여행"
            },
            {
                name: "첫1박! 가평 노마드!",
                coords: [37.818715, 127.325951],
                img: "231202.jpg",
                diary: "[2023.12.02]전역하고 처음본 정원이! 주말이라 짱비쌌지만 너무 좋았던 글램핑장!수영은 안했지만 불멍도하고 영화도 보고 야식과 술한잔하며 즐거운시간을 보냈당!우리의 첫날밤~@@",
                placeType: "여행"
            },
            {
                name: "우리의 첫 여행! 동해바다 강릉!",
                coords: [37.901960, 128.830151],
                img: "240204.jpg",
                diary: "[2024.02.04]기차타고 도착하자마자 카페거리앞에서 바다구경하고 커피도 마시고 중앙시장에서 김치삼겹말이같은 먹거리도 사먹었다!초당커피도 마시며 주문진에서 포장한 회와 함께 바다를 보며 쉬고 밤바다 산책도 하고 즐겨운 저녁을 보냈다!"
                , placeType: "여행"
            },
            {
                name: "우리의 시작,발렌타인데이!",
                coords: [37.552164, 126.917584],
                img: "240214.jpg",
                diary: "[2024.02.14]정원이가 손수만든 초콜렛 만들어준날! 이날은 홍대 더 디자이너스 호텔에서 우리의 기념비적인 1일이 시작된날이당! 부끄럽당~"
                , placeType: "기념일"
            },
            {
                name: "논산 촌강스!",
                coords: [36.207411, 127.092556],
                img: "240218.jpg",
                diary: "[2024.02.18]정원이랑 논산에서 촌강스!장봐서 첫날 고기도 구워먹고 3박4일동안 하루종일 뒹굴거리며 단란알콩달콩 시간을보냈다!!같이사는것같아서 너무 행복했지!"
                , placeType: "여행"
            },
            {
                name: "갑작스런 수원데이트!",
                coords: [37.266281, 127.001081],
                img: "240228.jpg",
                diary: "[2024.02.28]정원이가 술마실때 수원으로 마중나갔다!하룻밤 자구 솥뚜껑삼겹살도 먹고 팔달문에서 츄러스 아이스크림도 사먹었다!추웠지만 너무 좋았다~"
                , placeType: "여행"
            },
            {
                name: "지훈이 첫 생일!이태원에서~",
                coords: [37.534483, 126.987903],
                img: "240301.jpg",
                diary: "[2024.03.01]이태원에서 짧게 만났지만 그래도 너무 좋았다ㅠㅠ 칼바람이 엄청난 날씨..카페에서 선물도 받고 케잌이랑 편지도 받았당!헤헤 식당에서 생일축하노래도 틀어주고 밥도 먹었당!그리고 헤어져서 아쉬웠지만 너무 행복했다!"
                , placeType: "기념일"
            },
            {
                name: "이색데이트 와이키키 야외바베큐!",
                coords: [37.559084, 126.888770],
                img: "240303.jpg",
                diary: "[2024.03.03]망원 한강공원 옆 마포구 와이키키마켓에서 직접 고기를 구워먹었다!새우랑 야채 이것저것 먹었는데 연기가 조금 매웠지만 서울에서 바베큐를 구워먹는게 신기하고 재밌었다!"
                , placeType: "여행"
            },
            {
                name: "우리의 첫 화이트데이!",
                coords: [37.557251, 126.938566],
                img: "240314.png",
                diary: "[2024.03.14]정원이에게 수제 초콜릿 꽃다발을 선물해줬다! 너무 좋아해줘서 다행이였다..꽃도 직접 고르고 다발을 만드는게 쉽지 않았지만 보람차고 재밌었다!!"
                , placeType: "기념일"
            },
            {
                name: "우리의 한강나들이~",
                coords: [37.528222, 126.932633],
                img: "240324.jpg",
                diary: "[2024.03.24]날씨가 많이 풀려서 돛자리 깔구 맛난것도 시켜먹고 햇빛쬐며 뒹굴뒹굴~ 저녁은 조금 쌀쌀했지만 나른하고 행복한 시간이였다!"
                , placeType: "여행"
            },
            {
                name: "벚꽃데이트~",
                coords: [37.545002, 127.039291],
                img: "240403.jpg",
                diary: "[2024.04.03]같이 벚꽃보러 서울숲간날!완전 만개까진 아니였지만 그래도 너무 이뻤다!다른 꽃도 구경하고 동물도 구경하고 건대에서 오랜만에 사격도하고 재밌었당!"
                , placeType: "여행"
            },
            {
                name: "첫 기념일여행 낭만여수!",
                coords: [34.738561, 127.745043],
                img: "240517.jpg",
                diary: "[2024.05.17]처음가보는 여수!너무 설렜지..같은 남해지만 부산과 전혀 다른느낌의 여수는 진짜 낭만이였다!엑스포역에서 숙소들렀다가 이순신광장으로 산책도하고 밤바다보며 삼합도 먹고 모찌도 사고!! 밤풍경이 너무 아름다웠지 "
                , placeType: "기념일"
            },
            {
                name: "첫 기념일여행 낭만여수 2!",
                coords: [34.688054, 127.778958],
                img: "240518.jpg",
                diary: "[2024.05.18]차타고 밀터 칼국수와 해물파전을 먹고 본격적으로 돌산도 탐방! 해안절벽의 대형카페 모이핀에서 디저트도 먹고 등대는 못갔지만..돌산공원에서 바라본 여수풍경은 진짜 아직도 기억에 남아!!숙소에선 목욕도 같이했지~헤헤"
                , placeType: "기념일"
            },
            {
                name: "지갑수여식",
                coords: [37.515048, 127.108268],
                img: "240705.jpg",
                diary: "[2024.07.05]잠실에서 정원이가 생일선물로 주고싶다던 짱비싼 지갑을 선물해줬다ㅠㅠ 이 지갑 평생 써야게땅..헤헤 고마웡!!"
                , placeType: "여행"
            },
            {
                name: "콜라와 첫번째 가평 여행!",
                coords: [37.811340, 127.429703],
                img: "240712.jpg",
                diary: "[2024.07.12]콜라와 함께하는 첫번째 여행! 가평 동반84 글램핑장에 가서 같이 뛰어놀고 수영도 시켜줬다!콜라는 수영을 은근잘한다!고기도 구워먹고 콜라는 짱귀엽고 너무 재밌었다~"
                , placeType: "여행"
            },
            {
                name: "200일 제주여행!",
                coords: [33.248871, 126.410586],
                img: "240830.jpg",
                diary: "[2024.08.30]제주의 푸른 바다를 정원이와 함께 눈에 담은날! 첫날은 서쪽 애월부터해서 드라이빙하며 협재해변에서 칼국수도 먹고 금오름도 오른날!너무 힘들었지면 완벽한 뷰였지~녹차아이스크림도 사먹고 롯데호텔에서 호화로운 첫날을 보냈당!."
                , placeType: "기념일"
            },
            {
                name: "200일 제주여행 2!",
                coords: [33.461987, 126.936827],
                img: "240831.jpg",
                diary: "[2024.08.31]제주의 두번째날은 서쪽코스로! 갈치조림도 먹고 녹차밭 사진스팟에서 인생샷도 건지구 (썬구리가 없어졌지만..)일출봉구경하고 우뭇개해안의 검은해변에서 사진도 찍었다!마지막으로 딱새우랑 회,안주까지 포장해서 야무지게 저녁까지!"
                , placeType: "기념일"
            },
            {
                name: "축하행~ 정원이 생일!!",
                coords: [37.544848, 127.055895],
                img: "240906.jpg",
                diary: "[2024.09.06]정원이가 일하는날이 겹친 관계로 조금 늦게봤지만 성수에서 만나서 병아리케이크랑 선물과 편지를 챙겨갔다!너무 좋아해줘서 다행이였다,,건대에서 칵테일도 마시고 다음날엔 뚝섬데이트도 했다!!오예~~"
                , placeType: "기념일"
            },
            {
                name: "첫 강화도 여행!",
                coords: [37.619924, 126.538152],
                img: "240920.jpg",
                diary: "[2024.09.20]날씨가 좋진 않았지만 실내동물원에서 카피바라도 보고 정원이랑 전어구이랑 새우구이를 배터지게 먹은날! 날만 좋았어도 루지까지 타고오는거였는데 아직도 한이야.."
                , placeType: "여행"
            },
            {
                name: "한강 세계불꽃축제",
                coords: [37.525169, 126.936865],
                img: "241005.jpg",
                diary: "[2024.10.05]이날은 자리를 찾느라 조금 더웠다ㅠㅠ가산에서 초밥사서 겨우 자리잡고 밥을먹으며 기다리는데 개미때가 공격해서 스프레이도 샀다..그리고 불꽃축제!!진짜 장관이였다..매년봐도 이쁜데 정원이랑 봐서 훨씬 좋았다!!노래도 완전찰떡!매년마다 같이오자~?"
                , placeType: "여행"
            },
            {
                name: "콜라와 두번째 가평여행~",
                coords: [37.713517, 127.490207],
                img: "241018.jpg",
                diary: "[2024.10.18]이번엔 짱큰 차를 빌려서 가평 청평호 앞의 샤갈 애견동반펜션으로 갔다!신기한 투명돔안에서 고기도 구워먹고 콜라가 처음 드라이룸에 들어간날이다! 그리구 콜라는 항상 귀엽당!"
                , placeType: "여행"
            },
            {
                name: "노들섬 피크닉",
                coords: [37.518033, 126.957751],
                img: "241025.jpg",
                diary: "[2024.10.25]노들섬 피크닉간날! 미리 피자에 파스타로 점심먹구 돗자리도 사구 맥주랑 과자도 샀다!날도 너무 좋고 풍경도 좋았다~저녁될수록 사람이 많아졌다!사진도 찍고 재밌었당~담날엔 연남에서 대승곱창도 또 먹어따"
                , placeType: "여행"
            },
            {
                name: "여주 가을단풍여행!",
                coords: [37.237213, 127.694295],
                img: "241108.jpg",
                diary: "[2024.11.08]단풍을 보러 여주로 차타구 출발~점심은 간단히 만두포장해서 먹고 도착했는데 섬전체가 은행나무였다!황금색이라 너무 이뻤어~ 피크닉하고싶은곳!! 사진도 마구찍구 저녁엔 회도 먹었지~짱맛돌이! 처음으로 무인텔도 갔는데 신기했다! 가서 야식도 포장하고 짱재밌었당"
                , placeType: "여행"
            },
            {
                name: "300일 부산여행!",
                coords: [35.159119, 129.160455],
                img: "241205.jpg",
                diary: "[2024.12.05]부산여행! 도착하자마자 해운대로 차타고 가는데 피곤해서 커피수혈을 했지만 버티지못한 우린 해운대 오션뷰숙소를 구경하자마자 잠들었당.!그리고 너무 추웠지만 낭만넘치는 요트!!뷰가 너무좋아~~ 사진도 마구찍구 숙소에선 회도 시켜먹고 해운대 밤산책까지~너무 좋았어!!"
                , placeType: "기념일"
            },
            {
                name: "300일 부산여행 2!",
                coords: [35.079023, 129.045347],
                img: "241206.jpg",
                diary: "[2024.12.06]점심에 카츠도 먹고 남포쪽 흰여울 문화마을도 거닐며 음료한잔! 절에서 초도 태우고 이쁜 석양도 구경했다! 부산송도에서 케이블카 구경하며 산책도하고 고기도 먹고 고양이한테 몰래 새우머리도 줬다! 부산 송도 신라스테이에서 마무리~"
                , placeType: "기념일"
            },
            {
                name: "서울 전등축제",
                coords: [37.569415, 126.978063],
                img: "241213.jpg",
                diary: "[2024.12.13]날이 엄청 추웠지만 청계천에서 여러가지 이쁜 전등구경을 했다! 농심너구리 전등도 있었당..크리스마스 기간이라 광화문에서 여러가지 팝업스토어도 구경하고 짱큰 트리도 봤다! 근데 진짜 머리아플정도로 너무추웠어..정원이는 멀쩡했지만!"
                , placeType: "여행"
            },
            {
                name: "우리의 첫 크리스마스~",
                coords: [37.537315, 126.944283],
                img: "241225.jpg",
                diary: "[2024.12.25]우리는 피씨방에 있다가 저녁쯤에 미리 마포에 있는 부아쟁을 예약해놔서 짱 맛있는 코스요리를 먹었다! 후식케이크빼고 짱짱맛있었다!! 가격은 비쌌지만 한강야경뷰도 넘 이쁘고 분위기도 좋았다! 피씨방에선 크리스마스 기념 작은 선물도 줬당! 정원이가 좋아해줘서 행보케~ 매년 크리스마스는 함께야!!"
                , placeType: "기념일"
            },
            {
                name: "이색 찜질방데이트",
                coords: [37.480579, 127.124271],
                img: "250124.jpg",
                diary: "[2025.01.24]우린 잠실근처 송파 파크하비오 스파에서 찜질방데이트를 했다! 목욕 후 라면이랑 밥도 먹고 찜질방,아이스방도 가고 식혜먹으면서 티비도 봤당~ 방이동에서 맛난고기도먹었다!"
                , placeType: "여행"
            },
            {
                name: "!!!우리의 감격적인 1주년!!!",
                coords: [37.512619, 126.994931],
                img: "250213.jpg",
                diary: "[2025.02.13]우린 마중나온 셔틀을 타고 반포 세빛섬 무드서울에서 해산물 플래터와 스테이크를 먹었당! 와인도 곁들였는데 너무 좋았당..정원이는 한잔더 마셨당.정원이가 준비해온 1주년 선물은 너무 정성스러워서 감동이였다ㅠㅠ 우리의 2주년은 어디서 보내게 될까??"
                , placeType: "기념일"
            },
            {
                name: "1주년 기념 풀빌라여행~!",
                coords: [37.741319, 127.508781],
                img: "250214.jpg",
                diary: "[2025.02.14]무드서울에서 행복한 저녁을 보낸 다음날 우린 잠실에서 차타구 가평 스테이하연으로 갔다!중간에 차량문제가 좀 있었지만 쨌든!온수풀빌라였는데 너무 넓고 깔끔했다!! 아마 숙소중에 제일 맘에 든 숙소였다!물놀이도 하고 저녁엔 고기도 구워먹었다! 밤엔 야식먹으며 영화도보고 너무 행복했다ㅠㅠ 평생 이렇게 살래~"
                , placeType: "기념일"
            },
            {
                name: "첫 영종도 탐험대!",
                coords: [37.448188, 126.372119],
                img: "250228.jpg",
                diary: "[2025.02.28]우리의 첫 영종도 여행! 점심특선 해물찜 먹으면서 바다도 보고 카페에서 나른하게 보내다가 바닷가 구경도하고 물회도 먹고 푹쉬었당..인스파이어도 가서 고래쇼도 보여줬당! 두번봐도 너무이쁜 LED쇼야..다음엔 여기서 숙박해보고싶어.!워터파크도 있다고하넹ㅠㅠ"
                , placeType: "여행"
            },
            {
                name: "지훈이의 영종도 생일파티!",
                coords: [37.492858, 126.579147],
                img: "250301.jpg",
                diary: "[2025.03.01]숙소에서 12시 땡하자마자 정원이가 준비한 케이크와 선물들ㅠㅠ너무 감동이였다..선물도 너무 맘에들고 편지가 제일 좋았따!담날은 해물라면도 먹고 카페도 가서 수건케이크도 먹었다! 나중엔 비도 왔지만 너무 행복한날~"
                , placeType: "기념일"
            },
            {
                name: "두번째 화이트데이,그리고 펫페어!",
                coords: [37.495942, 127.071806],
                img: "250313.jpg",
                diary: "[2025.03.13]이날은 화이트데이 전날 미리 잠실에서 만나서놀았다! 직접만든 초콜릿과자도 주고 바베큐폭립세트도 먹었다!그리고 다음날 세텍 펫페어를 갔는데 강아지 용품이 엄청많았다!정원이는 폭풍쇼핑을 했다..다음엔 콜라랑 같이오고싶어!!"
                , placeType: "기념일"
            },
            {
                name: "논산 딸기축제!",
                coords: [36.195796, 127.105602],
                img: "250328.jpg",
                diary: "[2025.03.28]처음으로 딸기축제 구경간날! 딸기로 만든 디저트도 이것저것먹었다! 특히 누텔라딸기 넘 맛있당ㅠㅠ 굿즈도 구경하고 딸기랑 딸기막걸리,모찌 등등 많은 기념품을 샀다!정원이가 강추한 치킨 육개장세트도 포장해서 먹고 푹쉬어서 너무 좋았당!"
                , placeType: "여행"
            },
            {
                name: "콜라와 세번째 포천여행~",
                coords: [37.995847, 127.315247],
                img: "250424.jpg",
                diary: "[2025.04.24]벌써 콜라와 함께하는 세번째 여행~이날은 특별히 같은곳에서 2박을했다! 숙소가 텐트식이라 조금 추웠지만 히터도 빵빵하게 틀고 고기랑 조개도 구워먹고 낭만있었다.남은 고기로 다음날은 볶음밥도 해먹고 콜라랑 산책도하고 다른 강아지랑 인사도했다! 잘때 콜라가 너무 짖었지만ㅠㅠ..두번째날엔 산정호수도 가서 카페도 들르고 산책도했다!"
                , placeType: "여행"
            },
            {
                name: "콜라와 세번째 여행 번외편! 남양주에서,,",
                coords: [37.721562, 127.130273],
                img: "250426.jpg",
                diary: "[2025.04.26]포천여행 마지막날 카페 옴뇸뇸을 들렀는데 돼지부터 알파카,앵무새,대형견 등등 엄청 많은 동물카페를 갔다!동물들이 마구잡이로 돌아다녔는데 콜라반응이 너무 귀여웠당ㅠㅠ 사모예드는 조금 무서웠나보당.."
                , placeType: "여행"
            },
            {
                name: "떠돌이 경기도 안산숙박",
                coords: [37.334433, 126.809965],
                img: "",
                diary: "[2025.05.30]잠실에 있다가 갑자기 핸들로 떠난 안산..숙소도 싸서 좋았지만 다음날 돌아갈때 김포공항으로 지하철을 타고 조금 이동해야했다ㅠㅠ그래도 동네가 참 신기했당.."
                , placeType: "여행"
            },
            {
                name: "심장을 바쳐라!! 진격의거인 콘서트",
                coords: [37.591139, 127.032767],
                img: "250531.jpg",
                diary: "[2025.05.31]정원이가 예약한 진격거 콘서트!! 고려대에서 월드투어로 진행하는 진격거 콘서트를 갔다!날은 조금 더웠다ㅠ 그리고 시작하자마자 가슴이 웅장해졌다!진격거를 다본지 얼마 안되서그런지 더 좋았다.."
                , placeType: "여행"
            },
            {
                name: "영종도 카라반여행!",
                coords: [37.458122, 126.373005],
                img: "250606.jpg",
                diary: "[2025.06.06]정원이 어머님과 준서와 함께한 카라반여행! 숙소도 너무 이색적이고 고기와 새우도 구워먹고 밤엔 불멍도 하며 수다도 떨고 밤바다갯벌도 구경! 너무 재밌었지~ 다음날 인스파이어 리조트도 갔당!"
                , placeType: "여행"
            },
            {
                name: "우리의 500일 송도 호캉스~",
                coords: [37.389281, 126.644110],
                img: "250626.jpg",
                diary: "[2025.06.26]우린 호텔 최종선별 끝에 송도의 오크우드 호텔에서 기념일을 보내기로했다! 더현대에서 짱구팝업도 구경하고 점심도 먹고 호텔갔는데 로비로 가는길을 조금 헤맸다..헤헤 송도? 아니 인천에서 제일 높은건물같아서 그런지 생각치도 못한 고층에 뷰가 너무 좋았다..우린 낮잠을 푹 자고 디저트로 와플도 시켜먹고 와인과 함께 저녁을 먹으며 즐겁게보냈당~ (feat.포켓몬)"
                , placeType: "기념일"
            },
            {
                name: "단체 가평 계곡여행",
                coords: [37.751660, 127.366745],
                img: "250710.jpg",
                diary: "[2025.07.10]단둘이 간 여행은 아니지만 나름 다같이 계곡놀러가서 물놀이하고 고기구워먹고 노래도 부르고 정원이가 있어서 더 재미있었다! 정원이가 오랜만에 술도 마시고 다같이 게임도 하니 즐거워보여서 나도 좋았다!"
                , placeType: "여행"
            },
            {
                name: "긴급!! 춘천 당일치기여행!",
                coords: [37.884500, 127.716559],
                img: "250802.jpg",
                diary: "[2025.08.02]데이트마지막날 갑작스런 춘천 핸들이 잡혀서 피시방에 있던 우린 바로 구리에서 출발하게되었다!시간이 많지 않아 차를 빌려 이쁜카페도가고 소양호도 갔다!정원이가 운전도 조금했다! 저녁으론 또간집 닭갈비를 먹었다!그리고 전철타고 집가는데 3시간반이나 걸렸다ㅠㅠ그래도 재밌었다!!"
                , placeType: "여행"
            },
            {
                name: "태안반도 여행!",
                coords: [36.497340, 126.335231],
                img: "250808.jpg",
                diary: "[2025.08.08]서울에서 안면도로 출발!휴게소도 들러서 감자랑 떡볶이도 먹구 달려달려 도착했다! 기대를 안했던 풀빌라였지만 나름만족스러움.!물놀이하다가 꽂지해수욕장 근처에서 저녁으로 게국지정식도 먹고 밤바다 갯벌도 구경했는데 소라게랑 꽃게도 보고 재밌었당!! 밤엔 티비도 같이 보다가 알콩달콩 잠들었땅~"
                , placeType: "여행"
            },
            {
                name: "태안반도 여행 2!",
                coords: [36.912036, 126.250227],
                img: "250809.jpg",
                diary: "[2025.08.09]다음날 꽂지해수욕장에서 파스타먹구 민어도로 가는길에 외할머니댁도 들렀다!정원이도 인사하구 넘 신기했당..신기한참외랑 옥수수를 주셨다ㅠ 그리고 민어도에서 바다구경도했는데 나중에 정원이랑 캠핑카타고 오고싶당..화장실이슈가 있었지만 근처 바닷가 화장실에서 해결! 돌아가는길이 너무 아쉬웠다ㅠㅠ"
                , placeType: "여행"
            },
            {
                name: "긴급!! 원주여행!",
                coords: [37.347277, 127.933529],
                img: "250817.jpg",
                diary: "[2025.08.17]데이트마지막날 갑작스런 원주 핸들로 알바까지 노쇼하고 정원이와 함께 떠났다! 정원이가 운전도 조금하고 다음날엔 신기한 수제만두와 칼국수먹고 차를 빌려서 산속뷰 카페도 가고 맛난 크로플도 먹었다! 계곡가서 발도 담구고 작은 송사리도 잡았당~오예 그리고 수변공원도 들렀다가 저녁으론 회에 매운탕을 먹었다! 즉석여행치고 제일 재밌게 놀았던것같다.그리고 기차타고 서울로돌아갔는데 너무 아쉬웠엉ㅠ"
                , placeType: "여행"
            },
            {
                name: "떠돌이 경기도 안양숙박",
                coords: [37.402868, 126.922014],
                img: "",
                diary: "[2025.08.22]갑작스런 핸들로 떠난 안양엔 뭐가 있었을까! 사실 군포쪽이지만 밖에서 먹으려다 그냥 방 잡고 바로 밥을 시켰다! 이날은 바로 쉬고 다음날 피시방갔다가 가산으로 탈출했다ㅠㅠ"
                , placeType: "여행"
            },
            {
                name: "여름 물놀이 오션월드!!",
                coords: [37.648408, 127.685813],
                img: "250828.jpg",
                diary: "[2025.08.28]너무 오랜만인 워터파크!!버스타고 홍천 비발디에 도착하자마자 입장권 교환 후 입장! 유수풀 파도풀 놀이기구 등등 다 너무 재밌었다!조금 추웠지만 온수풀에서 회복도하고 밥도먹고 츄러스 아이스크림도 먹었다! 나중엔 파워가 쌘 유수풀과 파도풀을 탔는데 짱 재밌었다!숙소에선 피곤했는지 둘다 잠들었다가 뒤늦게 보쌈으로 저녁을 먹고 쉬었당..오랜만에 워터파크 너무 재밌었당!"
                , placeType: "여행"
            },
            {
                name: "떠돌이 경기도 광주숙박",
                coords: [37.391589, 127.282838],
                img: "250829.jpg",
                diary: "[2025.08.29]갑작스런 핸들로 떠난 광주엔 뭐가 있었을까! 사실 너무 늦어서 목구멍에서 고기먹고 바로 무인텔로가서 쉬었다..모기도 엄청물리고 새벽에 산사태 경보문자에..정신없었다ㅠㅠ담날은 판교로 이동해서 햄버거먹고 카페랑 노래방갔다가 차타고 망우역으로 다시 돌아갔다!"
                , placeType: "여행"
            },

        ];
        let markerLayer = L.layerGroup().addTo(map);
        let currentFilter = "all";

        // 기본 마커 아이콘 선택
        function getMarkerIcon(category) {
            if (category === "기념일") {
                return L.icon({
                    iconUrl: "https://cdn.pixabay.com/photo/2013/07/13/11/54/location-158934_640.png",
                    shadowUrl: "https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",
                    iconSize: [25, 41],
                    iconAnchor: [12, 41],
                    popupAnchor: [1, -34],
                    shadowSize: [41, 41],
                });
            } else {
                return L.icon({
                    iconUrl: "https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",
                    shadowUrl: "https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",
                    iconSize: [25, 41],
                    iconAnchor: [12, 41],
                    popupAnchor: [1, -34],
                    shadowSize: [41, 41],
                });
            }
        }

        // 마커 표시
        function addMarkers() {
            markerLayer.clearLayers();
            places
                .filter(p => currentFilter === "all" || p.placeType === currentFilter)
                .forEach(p => {
                    const marker = L.marker(p.coords, { icon: getMarkerIcon(p.placeType) }).addTo(markerLayer);

                    const popupContent = document.createElement('div');
                    popupContent.innerHTML = `<b>${p.name}</b><br>
                                                                  <img src="${p.img || 'https://via.placeholder.com/100x70'}" class="preview-img"/><br>`;
                    const btn = document.createElement('button');
                    btn.innerText = "자세히 펼쳐보기!";
                    btn.addEventListener('click', () => openModal(p.name));
                    popupContent.appendChild(btn);

                    marker.bindPopup(popupContent);
                });
        }

        function clearMarkers() { markerLayer.clearLayers(); }

        // 필터 버튼 토글 효과
        function setFilter(category, btnElement) {
            currentFilter = category;
            addMarkers();

            // 버튼 강조 토글
            document.querySelectorAll('#controls button').forEach(btn => btn.classList.remove('active'));
            btnElement.classList.add('active');
        }

        // 모달 열기
        function openModal(placeName) {
            const place = places.find(p => p.name === placeName);
            if (!place) return;

            const modal = document.getElementById("detailModal");
            modal.classList.remove('travel', 'event');

            if (place.placeType === "기념일") {
                modal.classList.add('event');
            } else {
                modal.classList.add('travel');
            }

            document.getElementById("modalTitle").innerText = place.name;
            document.getElementById("modalImage").src = place.img || "https://via.placeholder.com/400x250?text=No+Image";
            document.getElementById("modalDiary").innerText = place.diary;
            modal.style.display = "block";
        }

        function closeModal() { document.getElementById("detailModal").style.display = "none"; }

        // 줌 감지 → 8 이상에서만 마커 표시
        map.on('zoomend', () => {
            if (map.getZoom() >= 8) addMarkers();
            else clearMarkers();
        });

        // 초기 마커
        addMarkers();
    </script>
    <div id="introModal">
        <div id="introContent">
            <span id="introClose">&times;</span>
            <h2>💖 전국구 커플지도 💖</h2>
            <p>
                우리의 특별한 추억을 지도에 담아봤어!<br>
                여행지와 기념일을 기록하며<br>
                언제든 다시 떠올릴 수 있도록 💕
            </p>
        </div>
    </div>
    <script>
    // 소개 모달 요소
    const introModal = document.getElementById("introModal");
    const introClose = document.getElementById("introClose");

    // 타이틀 클릭 시 열기
    document.getElementById("title").addEventListener("click", () => {
    introModal.style.display = "flex";
    });

    // 닫기 버튼 클릭 시 닫기
    introClose.addEventListener("click", () => {
    introModal.style.display = "none";
    });

    // 모달 바깥 클릭 시 닫기
    window.addEventListener("click", (event) => {
    if (event.target === introModal) {
    introModal.style.display = "none";
    }
    });

    // ✅ 페이지 로드 시 자동으로 한 번 열기
    window.addEventListener("load", () => {
    introModal.style.display = "flex";
    });
    </script>
</body>
</html>

